<controls:MvxWpfControl
    x:Class="Peernet.Browser.WPF.Controls.FooterControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:MvvmCross.Plugin.Control.Platforms.Wpf;assembly=MvvmCross.Plugin.Control.Platforms.Wpf"
    x:Name="Footer">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <DockPanel Grid.Column="0">
            <StatusBar Background="Transparent" VerticalAlignment="Bottom" DockPanel.Dock="Bottom" Margin="83,0,0,10">
                <StatusBarItem>
                    <Image Height="26" Width="26">
                        <Image.Style>
                            <Style TargetType="{x:Type Image}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding ConnectionStatus}" Value="Offline">
                                        <Setter Property="Source" Value="{DynamicResource OfflineDrawingImage}" />
                                        <Setter Property="ToolTip" Value="Offline" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding ConnectionStatus}" Value="Online">
                                        <Setter Property="Source" Value="{DynamicResource OnlineDrawingImage}" />
                                        <Setter Property="ToolTip" Value="Connected" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding ConnectionStatus}" Value="Connecting">
                                        <Setter Property="Source" Value="{DynamicResource ConnectingDrawingImage}" />
                                        <Setter Property="ToolTip" Value="Connecting" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Image.Style>
                    </Image>
                </StatusBarItem>
                <StatusBarItem Margin="14,0,0,0" HorizontalAlignment="Left">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding Peers}" Foreground="#113E48" FontFamily="Inter" FontSize="14" FontWeight="SemiBold"/>
                        <TextBlock Text="Peers" Foreground="#113E48" FontFamily="Inter" FontSize="14" FontWeight="Regular" Margin="3, 0,0 , 0"/>
                    </StackPanel>
                </StatusBarItem>
            </StatusBar>
        </DockPanel>
        <Border Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Bottom" CornerRadius="3" Margin="0, 0, 0, 27" Padding="20">
            <Border.Background>
                <SolidColorBrush Color="White" />
            </Border.Background>
            <Border.Effect>
                <DropShadowEffect Color="Black" Opacity="0.12" ShadowDepth="4" BlurRadius="24" />
            </Border.Effect>
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <ItemsControl ItemsSource="{Binding DownloadManager.ActiveFileDownloads}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"></ColumnDefinition>
                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <Image Grid.Column="0" Height="20" Width="15" Style="{StaticResource DownloadItemImageStyle}" HorizontalAlignment="Left"/>
                                <TextBlock Grid.Column="1" Text="{Binding Name}" Style="{StaticResource Active}" FontWeight="SemiBold" VerticalAlignment="Center" HorizontalAlignment="Left" ToolTip="{Binding Name}" Margin="5,0,0,0" />
                                <TextBlock Grid.Column="2" Text="75%" Style="{StaticResource Active}" VerticalAlignment="Center" FontWeight="SemiBold" Margin="10,0,0,0" />
                                <ProgressBar Grid.Column="3" Margin="12,0,0,0" Minimum="0" Maximum="100" Value="70" Width="100" Background="#F2F2F2" Foreground="{StaticResource DarkGreenBrush}" BorderThickness="0" Height="1" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                <StackPanel Grid.Column="4" Orientation="Horizontal">
                                    <Button Cursor="Hand" Foreground="{StaticResource DarkGreenBrush}" Style="{StaticResource PauseButtonStyle}" Command="{Binding DataContext.PauseDownloadCommand, ElementName=Footer}" CommandParameter="{Binding}" />
                                    <Button Cursor="Hand" Foreground="{StaticResource DarkGreenBrush}" Style="{StaticResource CloseButtonStyle}" Command="{Binding DataContext.CancelDownloadCommand, ElementName=Footer}" CommandParameter="{Binding}" />
                                </StackPanel>
                                <Button Grid.Column="5" Content="Hide">
                                    <Button.Style>
                                        <Style TargetType="{x:Type Button}" BasedOn="{StaticResource PrimaryButton}">
                                            <Setter Property="ContentTemplate">
                                                <Setter.Value>
                                                    <DataTemplate>
                                                        <TextBlock TextDecorations="Underline" Text="{TemplateBinding Content}" />
                                                    </DataTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Button.Style>
                                </Button>
                            </Grid>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
            <Border.Style>
                <Style TargetType="{x:Type Border}">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding DownloadManager.ActiveFileDownloads.Count}" Value="0">
                            <Setter Property="Visibility" Value="Hidden"></Setter>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Border.Style>
        </Border>
        <Button Grid.Column="2"
                VerticalAlignment="Bottom"
                HorizontalAlignment="Right"
                Style="{DynamicResource UploadButtonStyle}"
                Command="{Binding UploadCommand}"
                Margin="0,0,80,25">
            <Button.Background>
                <ImageBrush ImageSource="{DynamicResource UploadDrawingImage}" />
            </Button.Background>
        </Button>
    </Grid>
</controls:MvxWpfControl>